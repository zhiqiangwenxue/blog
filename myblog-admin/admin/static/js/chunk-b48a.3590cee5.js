(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b48a"],{JIfv:function(e,s,a){},JdY6:function(e,s,a){"use strict";var t=a("a58d");a.n(t).a},S0Zm:function(e,s,a){"use strict";a.r(s);var t=a("wk8/"),r={components:{UploadImage:a("a0WV").a},data:function(){var e=this;return{loading:!1,userForm:this.$store.getters.user,passForm:{oldPass:"",newPass:"",checkPass:""},userRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]},passRules:{oldPass:[{required:!0,message:"请输入旧密码",trigger:"blur"},{min:6,message:"密码不能小于6位",trigger:"blur"}],newPass:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,message:"密码不能小于6位",trigger:"blur"}],checkPass:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:function(s,a,t){a!==e.passForm.newPass?t(new Error("两次输入密码不一致")):t()},trigger:"blur"}]}}},methods:{modifyUserInfo:function(){var e=this;this.$refs.userForm.validate(function(s){if(!s)return console.log("error submit!!"),!1;e.loading=!0,Object(t.e)(e.userForm).then(function(s){e.$notify({title:"成功",message:"用户信息修改成功",type:"success",duration:2e3}),e.loading=!1,e.$store.dispatch("GetUserInfo").then(function(s){e.userForm=s.data})}).catch(function(s){e.loading=!1,console.log(s)})})},modifyPassword:function(){var e=this;this.$refs.passForm.validate(function(s){if(!s)return console.log("error submit!!"),!1;e.loading=!0,Object(t.a)(e.passForm).then(function(s){e.$notify({title:"成功",message:"密码修改成功",type:"success",duration:2e3}),e.loading=!1,e.$store.dispatch("FedLogOut").then(function(){e.$router.push({path:"/login"})})}).catch(function(s){e.loading=!1,console.log(s)})})}}},o=(a("lPaP"),a("KHd+")),n=Object(o.a)(r,function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("el-tabs",{staticClass:"user-info",attrs:{value:"baseInfo",type:"card"}},[a("el-tab-pane",{staticClass:"tag-option",attrs:{label:"基本信息",name:"baseInfo"}},[a("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.userRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{staticClass:"user-input",attrs:{placeholder:"请输入用户名"},model:{value:e.userForm.username,callback:function(s){e.$set(e.userForm,"username",s)},expression:"userForm.username"}}),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"可用于登录",placement:"right"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{staticClass:"user-input",attrs:{placeholder:"请输入邮箱"},model:{value:e.userForm.email,callback:function(s){e.$set(e.userForm,"email",s)},expression:"userForm.email"}}),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"可用于登录",placement:"right"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[a("el-input",{staticClass:"user-input",attrs:{placeholder:"请输入昵称"},model:{value:e.userForm.nickname,callback:function(s){e.$set(e.userForm,"nickname",s)},expression:"userForm.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[a("upload-image",{model:{value:e.userForm.avatar,callback:function(s){e.$set(e.userForm,"avatar",s)},expression:"userForm.avatar"}})],1),e._v(" "),a("el-form-item",[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:e.modifyUserInfo}},[e._v("修改")])],1)],1)],1),e._v(" "),a("el-tab-pane",{staticClass:"tag-option",attrs:{label:"修改密码",name:"changePass"}},[a("el-form",{ref:"passForm",attrs:{model:e.passForm,rules:e.passRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"原密码",prop:"oldPass"}},[a("el-input",{staticClass:"user-input",attrs:{type:"password",placeholder:"请输入原密码"},model:{value:e.passForm.oldPass,callback:function(s){e.$set(e.passForm,"oldPass",s)},expression:"passForm.oldPass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码:",prop:"newPass"}},[a("el-input",{staticClass:"user-input",attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.passForm.newPass,callback:function(s){e.$set(e.passForm,"newPass",s)},expression:"passForm.newPass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码:",prop:"checkPass"}},[a("el-input",{staticClass:"user-input",attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:e.passForm.checkPass,callback:function(s){e.$set(e.passForm,"checkPass",s)},expression:"passForm.checkPass"}})],1),e._v(" "),a("el-form-item",[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:e.modifyPassword}},[e._v("修改")])],1)],1)],1)],1)},[],!1,null,"0f0651e9",null);n.options.__file="user-info.vue";s.default=n.exports},a0WV:function(e,s,a){"use strict";var t=a("kbZS"),r={name:"UploadImage",props:{value:{type:String,default:""}},computed:{image:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{beforeImageUpload:function(e){var s=/^image\/*/.test(e.type);return s||this.$message.error("上传文件只能是图片!"),s},uploadImg:function(e){var s=this,a=new FormData;a.append("image",e.file),Object(t.a)(a).then(function(e){s.$message.success("上传成功"),s.image=e.data})}}},o=(a("JdY6"),a("KHd+")),n=Object(o.a)(r,function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("el-input",{attrs:{placeholder:"图片地址"},model:{value:e.image,callback:function(s){e.image=s},expression:"image"}},[a("el-upload",{attrs:{slot:"append","before-upload":e.beforeImageUpload,"http-request":e.uploadImg,"show-file-list":!1,action:"",accept:"image/*"},slot:"append"},[a("el-button",{attrs:{type:"primary"}},[e._v("上传图片"),a("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1)},[],!1,null,"12290d5c",null);n.options.__file="index.vue";s.a=n.exports},a58d:function(e,s,a){},kbZS:function(e,s,a){"use strict";a.d(s,"a",function(){return r});var t=a("t3Un");function r(e){return Object(t.a)({url:"/uploadImage",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}},lPaP:function(e,s,a){"use strict";var t=a("JIfv");a.n(t).a}}]);